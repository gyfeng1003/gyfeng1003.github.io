(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["list-detail"],{"071c":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAABGdBTUEAALGPC/xhBQAABT5JREFUaAXtmWtoXEUUx7O7SUxC3Ni6EhqNQm3wERGUYGMMm1elUPrBGhQRWl8IUkUpFcVW2oIvEBFFiwhtPwhWxAdGhYKwyWZZQ1o/W9EgRROsRVAR65pNsvF3ZFev2/s4c/dRP8zAMHNn/nP+53/uvHZvQ4NNNgI2AjYCNgI2AjYCNgI2ArWJQKQ2Zv+1OjU11cLT1eQNhULhQsr2SCTSTkkROUt5lnYpzzQ1NX2VTCZPU69ZqrrgVCp1BULG8HjT6upqH+V6ckyrgLG/gj1JzjI+1dHRke3r6/tDOz4IVxXBmUzmxuXl5XHIxnHyqiBSw/48+BSBeL+lpeWjgYGBnw3H/wceWjBTNYG4HVh7kFKmbD1SHuHvQfTa6Ojo8TCExoIRugGBj0N2D6Wsz/OSEJ6G+ADCp00cUAvOZrNd+Xx+P8bvR2ijCUktsQifiMViu4aGhk5peAIF80ZlR92LyMfIrRqj9cYgOkd+Fd7nRkZGfvfj9xVcfKsZhF7pZ+T/0ofob5ubm5ODg4M/ePnkOzWZwneZioW0dKwseZEq25vAXQv/RUp8g/i6tLR0B3h5267JVzAG4q6jPBoRe7i7u/vhnp6eRQ+IUfPc3NwF8/PzB/HjAe1ALjFr/LBRv06TPsT+2NnZubNaYoVbbIlNsW3iix/WVzBEJm/qRG9vr1wSqpqKNk9ojQb5HCT4Cy0RuKwB1hT6uXYAgn199t2lhWRycvJ51tATVD3vw5B8yNq9u3w6yxpcWFgI5HATMzw8LLeqgvQV1/JR/LjdDVtsWwH/IheRPT6YBpUzs7Oz8VwudzkHvNuMOM0vnJ+cJJzdj+Dck+TLnO0mdZzPkDdzrv5ZGsed/RLq60rPpXJlZaXQ2tr6fX9//2+lNq9SJdhrsFs7M+JlhO5y6wvR9mk0Gt2G6OUQY12HuL0xV6CmkZ+GL1VRrFBuxd5hDbcWUzXBTOMXIN2tJdbiELyDQD6rxQfhqjKlEfsMB/7TQWSV9DO1H2Jqv1mJDRlbsWDE7kfsgUodUYyXXXicXXhCgfWEVCQYsXsRW7Xp5ullsQPBOab4prGxsZkgrFd/6DXMbvyooVg5Vw9ytN2USCTaJUudtjfIql0YsfLz9BO4Q/+NFOoNQ3gn5O9ArgoYgn4hb2ENzrpFHnu3YO9j+ta69Ze3YetUY2PjxvLzvxzn9mwsGOeGcO4zjDW7GfRo28w0lDGeiZ14lM6UJ6CsA9Fp8q2mZ7TqDZW4ZmZm1iL2KM8mYo8FiRX7YCYpjkldk/BjmLxPg3VijAQvLi4+xeAup4GgOseJelc1wQovgvdMT0/fEOSDs18tmHvsOjapnc7ByvoZJU5gJljBx7hHvyIVbVIL5o/27Rht0xp24C521IOqJti/bfGWkyZvWS0Y6xuDvHXrx6Etbu1ubSZY53je8lbns1/dRPClfoa8+hBxGxcU+cbkm9Lp9M0AtvmCPDrhWO/RdU6zieCwXxmirP0JRF93DnuxgSl5DZgPcNz4mCyaSHjZLm/3/deyHFzBcxeCjnOGy8/HIxxB34kt+dLIznwvU3I37fIpteapXoJFSBui5Nzch9DS5882AlFzkU4CE8H//NXiNBCyHma396TixiUf1FXJZA1/rbJ4fkDfaGlNBL+lNVpnnKyJd7WcasH88Jav8G9rDdcLh0+v49uXWj61YDEYj8fvozikNV5rHGKP4JN8nFenUOce9+rrOUq2s+v2w7SGMpQdtZcOICJzPJ6E8xDHW8bRZas2AjYCNgI2AjYCNgI2AjYCNgL1jMBfZv7Xx1FgqgoAAAAASUVORK5CYII="},"2f8b":function(t,e,i){var a={"./promo_en-US.png":"c084","./promo_zh-CN.png":"b0ed"};function o(t){var e=n(t);return i(e)}function n(t){var e=a[t];if(!(e+1)){var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}return e}o.keys=function(){return Object.keys(a)},o.resolve=n,t.exports=o,o.id="2f8b"},5118:function(t,e,i){(function(t){var a="undefined"!==typeof t&&t||"undefined"!==typeof self&&self||window,o=Function.prototype.apply;function n(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new n(o.call(setTimeout,a,arguments),clearTimeout)},e.setInterval=function(){return new n(o.call(setInterval,a,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(a,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},i("6017"),e.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(this,i("c8ba"))},6017:function(t,e,i){(function(t,e){(function(t,i){"use strict";if(!t.setImmediate){var a,o=1,n={},s=!1,l=t.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(t);c=c&&c.setTimeout?c:t,"[object process]"==={}.toString.call(t.process)?f():m()?h():t.MessageChannel?g():l&&"onreadystatechange"in l.createElement("script")?v():C(),c.setImmediate=d,c.clearImmediate=r}function d(t){"function"!==typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var s={callback:t,args:e};return n[o]=s,a(o),o++}function r(t){delete n[t]}function u(t){var e=t.callback,a=t.args;switch(a.length){case 0:e();break;case 1:e(a[0]);break;case 2:e(a[0],a[1]);break;case 3:e(a[0],a[1],a[2]);break;default:e.apply(i,a);break}}function p(t){if(s)setTimeout(p,0,t);else{var e=n[t];if(e){s=!0;try{u(e)}finally{r(t),s=!1}}}}function f(){a=function(t){e.nextTick(function(){p(t)})}}function m(){if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}}function h(){var e="setImmediate$"+Math.random()+"$",i=function(i){i.source===t&&"string"===typeof i.data&&0===i.data.indexOf(e)&&p(+i.data.slice(e.length))};t.addEventListener?t.addEventListener("message",i,!1):t.attachEvent("onmessage",i),a=function(i){t.postMessage(e+i,"*")}}function g(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;p(e)},a=function(e){t.port2.postMessage(e)}}function v(){var t=l.documentElement;a=function(e){var i=l.createElement("script");i.onreadystatechange=function(){p(e),i.onreadystatechange=null,t.removeChild(i),i=null},t.appendChild(i)}}function C(){a=function(t){setTimeout(p,0,t)}}})("undefined"===typeof self?"undefined"===typeof t?this:t:self)}).call(this,i("c8ba"),i("f28c"))},"942e":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list-detail-page"},[a("header-title",{attrs:{goHome:t.isGoHome,title:t.detailData.title}},[a("img",{staticClass:"collection",attrs:{slot:"rightBtn",src:i("c979")("./collection"+(t.isCollection?"-active":"")+".png")},on:{click:t.handleCollection},slot:"rightBtn"})]),a("img",{staticClass:"back",attrs:{src:i("d8b9")},on:{click:t.goBack}}),a("img",{staticClass:"collection",attrs:{src:i("c979")("./collection"+(t.isCollection?"-active":"")+".png")},on:{click:t.handleCollection}}),a("div",{staticClass:"header-box",style:{backgroundImage:"url("+t.headerImage.list[0]+")"}},[t.headerImage.videoList.length?a("img",{staticClass:"play-icon",attrs:{src:i("c4bd")},on:{click:function(e){return t.openWebviewVideo(t.headerImage.videoList[0],!1)}}}):t._e()]),a("div",{staticClass:"detail-container"},[a("div",{staticClass:"detail-card"},[a("div",{staticClass:"title"},[a("h2",[a("span",[t._v(t._s(t.detailData.title))])]),a("div",{staticClass:"price"},[[1===t.detailData.priceType&&t.detailData.priceRate?a("span",{staticClass:"money"},[t._v(t._s(t.toFixed(t.detailData.price*t.detailData.priceRate/10)))]):t._e(),2===t.detailData.priceType&&t.detailData.acturePrice?a("span",{staticClass:"money"},[t._v(t._s(t.detailData.acturePrice))]):t._e(),3===t.detailData.priceType&&t.detailData.custerPrice?a("span",{staticClass:"money"},[t._v(t._s(t.detailData.custerPrice))]):t._e(),1!==t.detailData.priceType&&2!==t.detailData.priceType||!t.detailData.price?t._e():a("span",{staticClass:"original-price"},[t._v("￥"+t._s(t.detailData.price))])],1!==t.detailData.priceType&&3!==t.detailData.priceType||!t.detailData.priceRate?t._e():a("span",{staticClass:"promo"},[t._v(t._s(t.isZH?t.detailData.priceRate:10*(10-t.detailData.priceRate)+"%")+t._s(t.isZH?"折优惠":" OFF"))])],2)]),t.promoInfo&&t.promoInfo.id&&t.promoInfo.effectiveFlag?[a("div",{staticClass:"row bd-t"},[t.isZH&&t.detailData.address||!t.isZH&&t.detailData.addressEn?a("img",{staticClass:"left-icon",attrs:{src:i("fd39")}}):t._e(),a("div",{staticClass:"text",on:{click:function(e){return t.openRouterMap(t.detailData)}}},[t._v(t._s(t.isZH?t.detailData.address:t.detailData.addressEn))]),a("div",{staticClass:"icons"},[t.isZH&&t.detailData.address||!t.isZH&&t.detailData.addressEn?a("img",{staticClass:"navigation",attrs:{src:i("06ce")},on:{click:function(e){return t.openRouterMap(t.detailData)}}}):t._e(),t.detailData.iphoneNum?a("div",{staticClass:"line"}):t._e(),t.detailData.iphoneNum?a("img",{staticClass:"phone",attrs:{src:i("ad81")},on:{click:t.showActionsheet}}):t._e()])])]:[t.isZH&&t.detailData.address||!t.isZH&&t.detailData.addressEn?a("div",{staticClass:"row bd-t",on:{click:function(e){return t.openRouterMap(t.detailData)}}},[a("img",{staticClass:"left-icon",attrs:{src:i("fd39")}}),a("div",{staticClass:"text"},[t._v(t._s(t.isZH?t.detailData.address:t.detailData.addressEn))]),a("img",{staticClass:"right-icon",attrs:{src:i("06ce")}})]):t._e(),t.detailData.iphoneNum?a("div",{staticClass:"row bd-t",on:{click:t.showActionsheet}},[a("img",{staticClass:"left-icon",attrs:{src:i("071c")}}),a("div",{staticClass:"text"},[t._v(t._s(t.detailData.iphoneNum))]),a("img",{staticClass:"right-icon",attrs:{src:i("ad81")}})]):t._e()],t.detailData.businessHour?a("div",{staticClass:"row store bd-t"},[a("img",{staticClass:"icon-store",attrs:{src:i("4d11")}}),a("div",{staticClass:"time"},[a("div",[t._v(t._s(t.detailData.businessHour))])])]):t._e()],2),t.promoInfo&&t.promoInfo.id&&t.promoInfo.effectiveFlag?a("div",{staticClass:"discount-info"},[a("h2",{staticClass:"title"},[t._v(t._s(t.$t("goodsDetail.preferentialInfor")))]),a("div",{staticClass:"discount"},[a("img",{attrs:{src:i("2f8b")("./promo_"+t.$i18n.locale+".png")}}),a("span",[t._v(t._s(t.promoInfo.productDesc))])]),a("div",{staticClass:"date"},[a("span",{staticClass:"label"},[t._v(t._s(t.$t("goodsDetail.expiryDate")))]),a("span",[t._v(" "+t._s(t.dateFormat(t.promoInfo.beginTime,"yyyy.mm.dd"))+"-"+t._s(t.dateFormat(t.promoInfo.endTime,"yyyy.mm.dd")))])])]):t._e(),a("div",{staticClass:"content-box"},[a("h5",{staticClass:"content-title"},[t._v(t._s(t.$t("listDetail.introduction")))]),a("div",{staticClass:"content",domProps:{innerHTML:t._s(t.detailData.detailInfoHtml)}})])]),t.noMore?a("p",{staticClass:"noMore"},[t._v(t._s(t.isZH?"已经到底了":"The End"))]):t._e(),t.promoInfo&&t.promoInfo.id&&t.promoInfo.effectiveFlag?a("div",{staticClass:"buy-btn",on:{click:t.toNext}},[t._v(t._s(t.$t("goodsDetail.getDiscount")))]):t._e(),a("v-actionsheet",{attrs:{visible:t.isActionsheetVisible},on:{"update:visible":function(e){t.isActionsheetVisible=e}}},[a("div",{staticClass:"phone-list"},[a("ul",[a("li",{on:{click:function(e){return t.callPhone(t.detailData.iphoneNum)}}},[t._v(t._s(t.detailData.iphoneNum))])]),a("div",{staticClass:"space"}),a("div",{staticClass:"cancel-btn",on:{click:t.hideActionsheet}},[t._v(t._s(t.$t("goodsDetail.cancel")))])])])],1)},o=[],n=(i("a481"),i("cebc")),s=(i("6762"),i("2fdb"),i("90e9")),l=i("c936"),c=i("62ce"),d=i("62a2"),r=i("ac2d"),u=i("88d1"),p=i("ed08"),f=i("5118"),m=s["a"].queryContent,h={name:"detail",data:function(){return{noMore:!1,id:this.$route.params.id,isActionsheetVisible:!1,isCollection:!1,headerImage:{list:[],originList:[],videoList:[]},location:{lat:"",lon:""},promoInfo:null,detailData:{},token:"",isOpenLocation:!1,showTitleHeight:200,isGoHome:"true"===this.$route.query.gohome}},components:{"header-title":u["a"]},beforeRouteLeave:function(){var t=document.querySelector(".list-detail-page");t.removeEventListener("scroll",function(){})},mounted:function(){var t=this;console.log(this.id,"this.id"),console.log(this.$route.path.includes("list-detail"),"this.$route"),this.scrollShowTitle(),Object(f["setTimeout"])(function(){r["a"].noCallAppLoginGetInfo(function(e,i){t.memberInfo=t.getMemberInfo(e),i&&t.isCollectedByContentId(),t.token=i}),r["a"].refreshPage(function(){r["a"].noCallAppLoginGetInfo(function(e,i){t.memberInfo=t.getMemberInfo(e),i&&t.isCollectedByContentId(),t.token=i})})},200),this.getLocation(),this.loadDetail()},methods:Object(n["a"])({scrollShowTitle:function(){var t=this,e=document.querySelector(".list-detail-page");e.addEventListener("scroll",function(){var e=document.querySelector(".headerTop");t.showTitleHeight>this.scrollTop?e.style.opacity=this.scrollTop/t.showTitleHeight:e.style.opacity=1})}},d["a"],{getLocation:function(t){var e=this;r["a"].gainLocation(function(t){100===t.msgCode&&t.result?(e.location.lat=t.result.gdLatitude,e.location.lon=t.result.gdLongitude):e.isOpenLocation=!0,e.loadDetail()},this)},loadDetail:function(t){var e=this;m({contentId:this.id,lat:this.location.lat,lon:this.location.lon}).then(function(t){e.detailData=t.data||{},null!=e.detailData.detailInfoHtml&&(e.detailData.detailInfoHtml=e.detailData.detailInfoHtml.replace(/<img/g,"<div></div><img")),e.detailData?e.noMore=!0:e.noMore=!1,e.promoInfo=t.data.productRes?t.data.productRes[0]:null,e.headerImage=e.getImgList(t.data.medias,750,500)})},openWebviewVideo:function(t,e){r["a"].openVideo({videoURL:t})},handleCollection:function(){this.isCollection?this.cancelCollection():this.addCollection()},openRouterMap:function(t){var e={lat:t.lat,lng:t.lon,address:this.isZH?t.address:t.addressEn,chainName:t.title,routerType:t.distance&&t.distance>1e3?1:3};r["a"].openRouterMap(e)},addCollection:function(){var t=this;this.token?c["a"].insertCollected({contentAddr:this.isZH?this.detailData.address:this.detailData.addressEn,contentId:this.detailData.id,contentName:this.detailData.title,lat:this.detailData.lat,lon:this.detailData.lon,organizeId:this.detailData.organizeId,organizeName:this.detailData.organizeName,organizeLevel:this.detailData.organizeLevel.join(","),organizeLevelName:this.detailData.organizeLevelName}).then(function(e){t.isCollection=!t.isCollection}).catch(function(t){}):r["a"].callAppLogin()},cancelCollection:function(){var t=this;c["a"].cancelCollected({contentId:this.id}).then(function(e){t.isCollection=!t.isCollection})},isCollectedByContentId:function(){var t=this;c["a"].queryCollectedByContentId({contentId:this.id}).then(function(e){t.isCollection=e.data})},scanCard:function(){r["a"].openScanCard({})},toNext:function(){this.token?l["a"].addOrder({beginTime:new Date(this.promoInfo.beginTime),endTime:new Date(this.promoInfo.endTime),isOn:this.promoInfo.status,productDesc:this.promoInfo.productDesc,productId:this.promoInfo.id,productName:this.detailData.title,productType:this.promoInfo.productType,address:this.isZH?this.detailData.address:this.detailData.addressEn,telephone:this.detailData.iphoneNum,lat:this.detailData.lat,lon:this.detailData.lon,thumbnailUrl:this.headerImage.originList[0]}).then(function(t){r["a"].openNewWebView({url:Object(p["b"])("/order-detail/".concat(t.data.id,"?from=list-detail")),isFitWindow:!0})}):r["a"].callAppLogin()},toFixed:function(t){return t.toFixed(2)},showActionsheet:function(){this.isActionsheetVisible=!0},hideActionsheet:function(){this.isActionsheetVisible=!1},callPhone:function(t){r["a"].callPhone({phoneNumber:t})},goBack:function(){this.isGoHome?r["a"].gotoHomePage():r["a"].closeWebView()}}),watch:{}},g=h,v=(i("f286"),i("2877")),C=Object(v["a"])(g,a,o,!1,null,null,null);e["default"]=C.exports},b0ed:function(t,e,i){t.exports=i.p+"img/promo_zh-CN.06c65a3f.png"},c084:function(t,e,i){t.exports=i.p+"img/promo_en-US.cd5c5619.png"},c4bd:function(t,e,i){t.exports=i.p+"img/play@3x.c69bad94.png"},dfbf:function(t,e,i){},f286:function(t,e,i){"use strict";var a=i("dfbf"),o=i.n(a);o.a}}]);