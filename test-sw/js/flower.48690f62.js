(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["flower"],{"15c9":function(e,t,a){},"266c":function(e,t){e.exports="data:image/png;base64,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"},"294e":function(e,t,a){},"48d3":function(e,t,a){"use strict";var i=a("fb23"),n=a.n(i);n.a},"791f":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"flower home-ios-11  home-ios-12",class:{isAndroid:e.isAndroid}},[i("header",[i("img",{staticClass:"header-back",attrs:{src:a("266c")},on:{click:e.goBack}}),i("span",{staticClass:"header-title"},[e._v(e._s(e.title))])]),e.img?i("photo",{on:{changeImage:e.changeImage}}):e._e(),e.imgUrl?i("photo-image",{attrs:{base64:e.base64,file:e.file},on:{changeImage:e.changeImage}}):e._e(),e.imgInfo?i("photo-result",{attrs:{file:e.file},on:{changeImage:e.changeImage}}):e._e()],1)},n=[],s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"photo"},[i("div",{staticClass:"topImg"}),i("div",[i("div",{staticClass:"imge",on:{click:e.openCamera}}),i("img",{staticClass:"camera",attrs:{src:a("c667"),alt:""}})]),i("p",{staticClass:"title"},[e._v("点击拍照识花")]),i("p",{staticClass:"des"},[e._v("对准植物，拍照试试吧～")])])},o=[],c=a("ac2d"),l={name:"photo",data:function(){return{file:{},base64head:"",base64:"",num:0}},created:function(){},mounted:function(){c["a"].watchAppBackBtn(this.callBack)},methods:{callBack:function(){c["a"].closeWebView()},openCamera:function(){var e=this;this.num||(this.num+=1,setTimeout(function(){e.num=0},500),c["a"].intProtocol({},function(t){100===t.msgCode&&t.result&&(e.base64="data:image/gif;base64,".concat(t.result.base64Image),e.handleImg(e.base64))}))},handleImg:function(e){var t=this,a=document.createElement("canvas"),i=a.getContext("2d"),n=new Image;n.src=e,n.onload=function(){var e=600,s=500;a.width=e,a.height=s,i.drawImage(n,0,0,e,s),a.toBlob(function(e){t.file={url:URL.createObjectURL(e),file:e},console.log(t.file,"this.file"),t.$emit("changeImage","file",t.file,t.base64)})}}}},r=l,f=(a("b4a2"),a("2877")),m=Object(f["a"])(r,s,o,!1,null,"1e034c0c",null),g=m.exports,d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"photoImage"},[a("div",{staticClass:"img"},[e.file&&!e.againRequest?a("img",{attrs:{src:e.base64,alt:""}}):e._e(),e.newFile&&e.againRequest?a("img",{attrs:{src:e.base64head,alt:""}}):e._e()]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isInfo,expression:"isInfo"}],staticClass:"isInfo"},[e._v("抱歉, 暂时无法鉴定, 还在努力学习哦")])])},h=[],u=(a("6762"),a("2fdb"),a("bc3a")),A=a.n(u),w=A.a.create({timeout:2e5,headers:{"Content-Type":"multipart/form-data"}}),p={name:"photoImage",props:["file","base64"],data:function(){return{isInfo:!1,imgDetial:{},newFile:{},againRequest:!1,timer:"",base64head:""}},created:function(){this.discernFlower()},mounted:function(){c["a"].watchAppBackBtn(this.callBack)},destroyed:function(){window.clearTimeout(this.timer)},methods:{callBack:function(){this.$emit("changeImage","close")},discernFlower:function(){var e=this,t=new FormData,a={};a=this.againRequest?this.newFile.file:this.file.file,t.append("file",a),c["a"].showLoading(),w.post("/identify/flower",t).then(function(t){c["a"].hideLoading();var a=t.data.data;"0.0"===a.score?(e.isInfo=!0,e.timer=setTimeout(function(){e.$emit("changeImage","close"),e.isInfo=!1},3e3)):(e.imgDetial=a,e.$emit("changeImage","info",e.imgDetial))}).catch(function(t){c["a"].hideLoading(),t.message.includes("Network Error")?setTimeout(function(){e.$toast({content:"暂无网络，请检查是否连接网络"})},1e3):setTimeout(function(){e.$toast({content:"系统繁忙，请稍后再试"})},1e3),e.timer=setTimeout(function(){e.$emit("changeImage","close"),e.againRequest=!0,e.isInfo=!1},3e3)})},openCamera:function(){var e=this;c["a"].intProtocol({},function(t){100===t.msgCode&&t.result&&(e.againRequest=!0,e.base64head="data:image/gif;base64,".concat(t.result.base64Image),e.$store.commit("imgBase64",e.base64head),e.$emit("changeImage","close"))})},handleImg:function(e){var t=this,a=document.createElement("canvas"),i=a.getContext("2d"),n=new Image;n.src=e,n.onload=function(){console.log(n.height,"img.height");var e=300,s=200;a.width=e,a.height=s,i.drawImage(n,0,0,e,s),a.toBlob(function(e){t.newFile={url:URL.createObjectURL(e),file:e},t.discernFlower()})}}}},b=p,I=(a("48d3"),Object(f["a"])(b,d,h,!1,null,"94e8e272",null)),v=I.exports,B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"photo-result"},[a("div",{staticClass:"header-image",style:{backgroundImage:"url("+e.imageStr+")"}}),a("div",{staticClass:"detail-container"},[a("div",{staticClass:"detail-card"},[a("div",{staticClass:"bd-t"},[e._v("植物名称: "+e._s(e.file.name))]),a("div",{staticClass:"des"},[a("p",{staticClass:"title"},[e._v("植物简介")]),a("div",{staticClass:"info"},[e._v(e._s(e.file.description))])])])])])},C=[],j={name:"photo-result",props:["file"],computed:{imageStr:function(){return"data:image/gif;base64,".concat(this.file.imageStr)}},mounted:function(){c["a"].watchAppBackBtn(this.callBack)},methods:{callBack:function(){this.$emit("changeImage","close")}}},k=j,F=(a("bfbc"),Object(f["a"])(k,B,C,!1,null,"3acfe6eb",null)),M=F.exports,U=a("88ec"),Y={name:"flower",components:{photo:g,photoImage:v,photoResult:M},data:function(){return{img:!0,imgUrl:!1,imgInfo:!1,file:{},title:"拍照识花",base64:"",isAndroid:Object(U["a"])()}},mounted:function(){c["a"].watchAppBackBtn(this.callBack)},methods:{callBack:function(){c["a"].closeWebView()},goBack:function(){this.img?c["a"].closeWebView():(this.imgUrl||this.imgInfo)&&(this.img=!0,this.imgUrl=this.imgInfo=!1,this.file={})},changeImage:function(e,t,a){console.log(e,"file"),"file"===e&&t?(this.file=t,this.base64=a,this.img=this.imgInfo=!1,this.imgUrl=!0):"info"===e&&t?(this.file=t,this.img=this.imgUrl=!1,this.imgInfo=!0):"close"===e&&(this.img=!0,this.imgUrl=this.imgInfo=!1)}}},E=Y,G=(a("e80d"),Object(f["a"])(E,i,n,!1,null,"1a452978",null));t["default"]=G.exports},"88ec":function(e,t,a){"use strict";function i(e){var t=/^[A-Za-z\d]+([-_.][A-Za-z\d]+)*@([A-Za-z\d]+[-.])+[A-Za-z\d]{2,4}$/;return t.test(e)}function n(){var e=window.navigator.userAgent,t=e.indexOf("Android")>-1||e.indexOf("Adr")>-1;return!!t}a.d(t,"b",function(){return i}),a.d(t,"a",function(){return n})},b4a2:function(e,t,a){"use strict";var i=a("294e"),n=a.n(i);n.a},bfbc:function(e,t,a){"use strict";var i=a("15c9"),n=a.n(i);n.a},c667:function(e,t,a){e.exports=a.p+"img/take_photo@3x.30085a8e.png"},e80d:function(e,t,a){"use strict";var i=a("ebbf"),n=a.n(i);n.a},ebbf:function(e,t,a){},fb23:function(e,t,a){}}]);