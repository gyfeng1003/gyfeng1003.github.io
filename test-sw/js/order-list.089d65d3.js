(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["order-list"],{"61e5":function(t,e,a){},7451:function(t,e,a){},"91f2":function(t,e,a){"use strict";var s=a("61e5"),i=a.n(s);i.a},"9eff":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"order-list-page"},[s("ul",{staticClass:"tabs"},t._l(t.tabList,function(e,a){return s("li",{key:a,class:{active:t.currentIndex===a},on:{click:function(s){return t.handleChangeTab(a,e.category,e.link)}}},[s("div",{staticClass:"wrap"},[s("span",[t._v(t._s(t.$t(e.name)))]),s("div",{staticClass:"line"})])])}),0),s("div",{staticClass:"space"}),t.list.length?s("div",{staticClass:"scroll-wrap"},[s("scroll",{ref:"scroll",attrs:{data:t.list},on:{onPullingUp:t.pullingUp}},t._l(t.list,function(e){return s("div",{key:e.id,staticClass:"list-item",on:{click:function(a){return t.toPage(e.id)}}},[s("div",{staticClass:"info"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.thumbnailUrl+"?imageView2/1/w/110/h/110",expression:"`${item.thumbnailUrl}?imageView2/1/w/110/h/110`"}],staticClass:"detail-img"}),s("div",{staticClass:"detail-info"},[s("div",{staticClass:"title"},[t._v(t._s(e.productName))]),s("div",{staticClass:"address"},[s("img",{attrs:{src:a("fd39")}}),s("div",{staticClass:"text"},[t._v(t._s(e.address))])])])]),s("div",{staticClass:"date-wrap"},[s("div",{staticClass:"date"},[s("span",[t._v(t._s(t.$t("orderList.bookTime")))]),s("span",[t._v(t._s(t.formatTime(e.createTime)))])]),s("div",{staticClass:"detail-btn"},[t._v(t._s(t.$t("orderList.toDetail")))])])])}),0)],1):t._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.list.length||t.isShowEmpty,expression:"!list.length || isShowEmpty"}],staticClass:"empty"},[s("img",{attrs:{src:a("ddde")}}),s("div",{staticClass:"tips"},[t._v(t._s(t.$t("orderList.empty")))])])])},i=[],o=a("75fc"),r=a("ac2d"),n=a("c936"),l=a("ef39"),c=a("a599"),d=a("90fe"),u=a("ed08"),p=n["a"].getOrderList,h="http://booking.visitshanghai.com.cn/hotelbooking/order/index.html",m=[{name:"orderList.orderFood",category:"restaurant"},{name:"orderList.orderShopping",category:"shopping"},{name:"orderList.orderHotels",category:"hotel",link:"zh-CN"===Object(d["d"])("lang")?"".concat(h,"#/orderList"):"".concat(h,"?lang=en#/orderList")},{name:"orderList.orderAttractions",category:"attractions",link:"zh-CN"===Object(d["d"])("lang")?"https://m.lvmama.com/webapp/my/orderList/#/ticketOrders":"https://m.lvmama.com/onemobile/orderList/#/ticketOrders"},{name:"orderList.orderTrips",category:"travel",link:"zh-CN"===Object(d["d"])("lang")?"https://m.lvmama.com/webapp/my/orderList/#/vacationOrders":"https://m.lvmama.com/onemobile/orderList/#/vacationOrders"},{name:"orderList.orderRoute",category:"route",link:"zh-CN"===Object(d["d"])("lang")?"https://m.lvmama.com/webapp/company/orderList/":"https://m.lvmama.com/onemobile/company/orderList/"}],f={components:{Scroll:l["a"]},data:function(){return{tabList:m,currentIndex:0,category:"restaurant",list:[],start:0,offset:10,total:0,isShowEmpty:!1}},mounted:function(){var t=this;r["a"].setAppTitle({title:this.$t("orderList.myOrder")}),Object(d["d"])("token")&&this.loadList(),c["a"].$on("successLogin",function(){t.loadList()})},methods:{handleChangeTab:function(t,e,a){a?r["a"].openNewWebView({url:a,isFitWindow:!0}):(this.currentIndex=t,this.category=e,this.list=[],this.loadList())},loadList:function(){var t=this;p({productType:this.category,start:this.start,offset:this.offset}).then(function(e){t.isShowEmpty=!0,"0"===e.code&&e.data.result&&(t.list=[].concat(Object(o["a"])(t.list),Object(o["a"])(e.data.result)),t.total=e.data.totalRowNum)})},pullingUp:function(){this.list.length>=this.total?this.$refs.scroll.closePullUp():(this.start+=this.offset,this.loadList())},formatTime:function(t){return Object(d["b"])(t,".")},toPage:function(t){r["a"].openNewWebView({url:Object(u["b"])("/order-detail/".concat(t,"?from=order")),isFitWindow:!0})}}},v=f,b=(a("91f2"),a("2877")),w=Object(b["a"])(v,s,i,!1,null,"1c88df30",null);e["default"]=w.exports},c936:function(t,e,a){"use strict";var s=a("da80"),i=a("8742");e["a"]={addOrder:function(t){return Object(s["a"])({method:"POST",url:i["a"].order.addOrder,data:t})},getOrderDetail:function(t){return Object(s["a"])({method:"POST",url:i["a"].order.getOrder,data:t})},getOrderList:function(t){return Object(s["a"])({method:"POST",url:i["a"].order.getList,data:t})}}},ddde:function(t,e,a){t.exports=a.p+"img/no_order.6317e10a.png"},e0c6:function(t,e,a){"use strict";var s=a("7451"),i=a.n(s);i.a},ed08:function(t,e,a){"use strict";a.d(e,"b",function(){return s}),a.d(e,"a",function(){return i});a("28a5");var s=function(t){return window.location.href.split("#")[0]+"#"+t},i=function(){return new Promise(function(t,e){if(window.AMap)t(window.AMap);else{var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="http://webapi.amap.com/maps?v=1.4.14&callback=initAMap&key=555c914c29cb33d914437914f1b79b49",a.onerror=e,document.head.appendChild(a)}window.initAMap=function(){t(window.AMap)}})}},ef39:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"wrapper",staticClass:"scroll-wrapper"},[s("div",{staticClass:"scroll-content"},[t._t("default"),t._t("pullup",[t.hasMore?s("div",{staticClass:"pullup-wrapper"},[s("img",{directives:[{name:"show",rawName:"v-show",value:t.hasMore,expression:"hasMore"}],staticClass:"loading",attrs:{src:a("cf63")}}),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.hasMore&&t.data.length>0,expression:"!hasMore && data.length>0"}],staticClass:"no-more"},[t._v(t._s(t.noMoreData))])]):t._e()],{pullUpLoad:t.pullUpLoad,isPullUpLoad:t.isPullUpLoad,isNoMore:t.isNoMore})],2)])},i=[],o=(a("c5f6"),a("1fba")),r={props:{data:{type:Array,default:function(){return[]}},bounce:Boolean,pullUpLoad:{type:Boolean,default:!0},click:{type:Boolean,default:!0},probeType:{type:Number,default:1},refreshDelay:{type:Number,default:20},noMoreData:{type:String},hasMore:{type:Boolean},attachScroll:{type:Boolean,default:!1}},data:function(){return{isPullUpLoad:!1,isNoMore:!1}},methods:{initScroll:function(){var t=this;if(this.$refs.wrapper){var e={bounce:this.bounce,click:this.click,pullUpLoad:this.pullUpLoad,probeType:this.probeType};this.scroll=new o["a"](this.$refs.wrapper,e),this.pullUpLoad&&this.addEventPullUpLoad(),this.attachScroll&&this.scroll.on("scroll",function(e){Math.abs(e.y)>=100?t.$store.commit("SET_HEADER_BAR",!0):t.$store.commit("SET_HEADER_BAR",!1)})}},handlePullingUp:function(){this.isPullUpLoad=!0,this.$emit("onPullingUp")},addEventPullUpLoad:function(){this.scroll.on("pullingUp",this.handlePullingUp)},removeEventPullUpLoad:function(){this.scroll.off("pullingUp",this.handlePullingUp)},closePullUp:function(){this.isPullUpLoad=!1,this.isNoMore=!0,this.removeEventPullUpLoad()},forceUpdate:function(){this.pullUpLoad&&this.isPullUpLoad&&(this.isPullUpLoad=!1,this.scroll.finishPullUp()),this.refresh()},refresh:function(){this.scroll.refresh()}},mounted:function(){var t=this;setTimeout(function(){t.initScroll()},20)},destroyed:function(){this.scroll.destroy()},watch:{data:function(){var t=this;setTimeout(function(){t.forceUpdate()},this.refreshDelay)}}},n=r,l=(a("e0c6"),a("2877")),c=Object(l["a"])(n,s,i,!1,null,"9c17b8a2",null);e["a"]=c.exports},fd39:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAABGdBTUEAALGPC/xhBQAABVdJREFUaAXtmktoXFUYx2cmISShu2LHWtMuapCSZaWWxEkmyaqPjc2mWKUtLqLduOjCQkVBRHDhohsfq6ZQ+1h01WqRksnDpDihpUIJgqj4StOoy0bikJnx94U79M7l5J7HvXeQci9czuN7/f/fd3LPuTeTyaRXmoE0A2kG0gykGfjfZCDbKiSlUun5er2+I5fLbSfm017ch7Vabbmjo+OPQqHwQyuwJEZ4cXGxY2Vl5QAkDkH0IO0ODaGlbDb7FTpf5vP5m319fRWNvpM4dsJTU1PtVO0kaN7h3umEKpP5DbsPWA3nh4eH1x19KM1iJcyyHSXK51R0tzKa5SQV/wmT8ZGRkUlL003Vc5tKLAQQzE5OTp6h/ToushJefIlPz3csxYnsRJYwoK5wj1nkyFqVal/jPhp1iUeuMEQ/S5qsV+0xiWWdqYBBJMJU9ywgXg/4TGwosSRmlADOS3p2dnbf+vr6t4Bw9uECnGVdb29v3z84OLjgYu9UYSEJ2XMOZGWvvQzQj+X2+ks2wCPE3gjjVB2W1TH22oumQCE2zZ76brFY/EZlMz09XcDf+5ApquSqOXweY7u6pJKFzTkRZr+VpfximGNPVoXo2zxZpaLai0SehvhHKLbplCFchvB+nV5Qbk14Zmamp1qt/mq4nE+Njo5+GgwaNmbPfRP5J2E6IoNwva2tbdfQ0NDvOl2/3PpvmArI9qBNFICu2pIVYGIjtn6Qqr5gECwqWdicNWECFcIcerIaoM8Y6ClVPNuaUuibNMTis8hkrAljrXvrkeU2x9/tL02RLAZiKz4MTLRYgj6sCZPVZ4NOFGMTsAqzpqn5ppF6kDxh4j6ljv14luosPx659fDxQGdJ8rfpdIJy6wrj4O+gk+CYh8mW4Jzt2NDHX7Z+rQmT+R91QdB5Tqejk+Oj10BH3petLmvCLKNbugjoHOa29t3wK7bchxrjzVp0tFiCttagyPz1oBPFOM9x8TXFvNGUZ5vXKRtiaXKjPUA0aXsDTkNluvtUssYcYJZ5q9nLW43VA4y3sO28mNylevJ1M+xa4JBicrxt8mFdYbHmfKw9+glggF8vl8tbmyKGDERXbAzIGmFQhXIijKMvuH9WOfTPAXzv6urqXV4Kiv55VV90RFdsVHL/HKtHHlaCwfpyWtISBYDH2TomTCMCsgSZK3x0n6GKG3ssS/6ZSqUyhOwoshFTX6ywE5zGLpjq+/WcCQMwB+nbtNZ/R34Atn2SU4ZsP632rK3y7bqk5bwsLwhv4LSqcpzQXFViupIVTM6ExZhMf0fwc9JvxSWxJGaUWJEIS2BAvMdt9RLuAlhiSCwXW79NZMJk/BFATvmdJtGXGBIrqu/IhAUAQG4ASLs3u4IV3xLD1d5vFwthcQio0zT3/c5j6t/3fMfiznlbUkXnA98e9tg7yLpVcoe5f9irX+BD3fcOtkqT2Cos3gUYh4K3lJEcJsVXnGQFQqwVbnDiu/UEB5LjjbFLyzK+wHfnEy62YTaxVrgRqKenZ5y+0/9+PB8Lno+Gy9jaRAj39vb+29XVdYQqPbRFKjZiKz5sbU30EyEsgfv7+5dY1mN0bX6cUhEbsTUB76KTGGEBwwv6bRo5bxtdPKTGPRsjfRelRAkLIAicZ5l+qAMnOhwuJnR6UeWJPKWDoFimWV4lL9K+EpTJGLKXIPsqbV0lj3Mu8Qp7hOr82OwkhEpB8DLnyRInK7FbQlgCyS/ruru7X6Z7T8bedU/mkvrVXSOIv23JkvYHnJ+f37a2trbxv6fOzs6XBgYG/vTLn8j+3NzcTrmfSHIpqTQDaQbSDKQZSDNgnoH/ACe93aT9S+jDAAAAAElFTkSuQmCC"}}]);