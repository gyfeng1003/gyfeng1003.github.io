(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["foodList"],{"0c07":function(t,o,e){},2486:function(t,o,e){"use strict";var s=e("d225"),n=e("b0b4"),i=(e("4917"),!1);try{var a=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("test-passive",null,a)}catch(C){}var r=i,c=e("b4f0"),l=1,d=2,h=3,u=4,p=5,f="dropstart",v="dropmove",_="dropend",m="dropupstart",g="dropupend",w={container:".drop-down-container",dropMax:200,damping:1.15,duration:300,autoBack:!0,disable:!1},y=Object.prototype.hasOwnProperty,b=function(t,o){return y.call(t,o)},S=window.navigator.appVersion.match(/iphone/gi),T=function(){function t(o,e){Object(s["a"])(this,t);var n=parseInt(getComputedStyle(document.getElementsByTagName("html")[0],null).fontSize);function i(t){return t*n/75}if(this._opts=Object.assign(w,e||{}),this._opts.dropMax=i(this._opts.dropMax),this._el="string"===typeof o?document.querySelector(o):o,!this._el)throw new Error("drop-down components can not find element !");this._container=this._el.querySelector(this._opts.container),this.translateY=0,this.duration=0,this._status=l,this._canDrop=!1,this._canMove=!0,this._isTouch=!1,this._events={},this._dropStartOnce=!0,this._startY=0,this._moveY=0,this._changeY=0,this._init()}return Object(n["a"])(t,[{key:"_init",value:function(){this._initEvent()}},{key:"_initEvent",value:function(){this._el.addEventListener("touchstart",this,!!r&&{passive:!0}),document.addEventListener("touchmove",this,!1),document.addEventListener("touchend",this,!!r&&{passive:!0}),this._container.addEventListener("webkitTransitionEnd",this,!1),this._container.addEventListener("transitionend",this,!1)}},{key:"_eventDropStart",value:function(t){this._isTouch=!0,this._startY=t.touches[0].clientY}},{key:"_eventDropMove",value:function(t){if(this._canMove&&!this._opts.disable&&this._isTouch)if(this._changeY=t.touches[0].clientY-this._startY,this._moveY=this._changeY,this._el.scrollTop<=0&&this._changeY>0){if(this._canDrop=!0,S&&t.preventDefault(),this._dropStartOnce&&(this._status=l,this.emit(f),this._dropStartOnce=!1),this._isTransition(!1),this._setTranslateY(this._moveY/this._opts.damping),!this._dropStartOnce){this._status=d;var o=this.translateY/this._opts.dropMax;this.emit(v,o)}this.translateY===this._opts.dropMax&&(this._status=h,this.emit(_))}else this._canDrop=!1,this._status=l}},{key:"_eventDropEnd",value:function(t){if(this._isTouch=!1,this._canMove){this._opts.autoBack&&this.dropBack();var o=this._status;this._status=u,this._dropStartOnce=!0;var e=o===h;e&&!this._opts.autoBack&&(this._canMove=!1),this.emit(m,e)}}},{key:"_transitionEnd",value:function(t){this._canDrop=!1,this._canMove=!0,this._status=p,this._isTransition(!1),Object(c["b"])(!1),this.emit(g)}},{key:"_setTranslateY",value:function(t){this.translateY=t/3,this.translateY=this.translateY>this._opts.dropMax?this._opts.dropMax:this.translateY;var o=this._container.style;o.webkitTransform=o.MozTransform=o.OTransfrom=o.msTransform=o.tranform="translate3d(0, ".concat(this.translateY,"px, 0)")}},{key:"_isTransition",value:function(t){var o=this._container.style;this.duration=t?this._opts.duration:0,o.webkitTransitionDuration=o.MozTransitionDuration=o.msTransitionDuration=o.OTransitionDuration=o.transitionDuration=this.duration+"ms"}},{key:"handleEvent",value:function(t){switch(t.type){case"touchstart":this._eventDropStart(t);break;case"touchmove":this._eventDropMove(t);break;case"touchend":this._eventDropEnd(t);break;case"webkitTransitionEnd":case"transitionend":this._transitionEnd(t);break}}},{key:"dropBack",value:function(t){if(this._isTransition(!0),this._setTranslateY(0),"function"===typeof t){var o=function o(){t(),this.off(g,o)};this.on(g,o)}}},{key:"getStatus",value:function(){return this._status}},{key:"disabled",value:function(){this._opts.disable=!0}},{key:"enabled",value:function(){this._opts.disable=!1}},{key:"on",value:function(t,o){return b(this._events,t)||(this._events[t]=[]),this._events[t].push(o),this}},{key:"off",value:function(t,o){if(b(this._events,t)){var e=this._events[t].indexOf(o);-1!==e&&this._events[t].splice(e,0)}return this}},{key:"emit",value:function(t){var o=this._events;if(b(this._events,t))for(var e=0,s=o[t].length,n=Array.prototype.slice.call(arguments,1);e<s;e++)o[t][e].apply(this,n);return this}},{key:"destroyed",value:function(){this._el.removeEventListener("touchstart",this),document.removeEventListener("touchmove",this),document.removeEventListener("touchend",this,!1),this._container.removeEventListener("webkitTransitionEnd",this),this._container.removeEventListener("transitionend",this)}}]),t}(),k=T;function E(){}o["a"]={inserted:function(t,o){t._option=o.value.option||{},t._dropDown=new k(t,t._option);var e=o.value.dropStart||E,s=o.value.dropMove||E,n=o.value.dropUpStart||E,i=o.value.dropUpEnd||E;t._dropDown.on(f,function(o){return e(t._dropDown,o)}),t._dropDown.on(v,function(o){return s(t._dropDown,o)}),t._dropDown.on(m,function(o){return n(t._dropDown,o)}),t._dropDown.on(g,function(o){return i(t._dropDown,o)})},unbind:function(t){t._dropDown.destroyed()}}},"28ce":function(t,o,e){t.exports=e.p+"img/food-bg.31f081bf.png"},"2cab":function(t,o,e){"use strict";var s=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"yellow_star"},[e("div",{staticClass:"back1 v-md"},t._l(5,function(t){return e("div",{key:t})}),0),e("div",{staticClass:"front v-md",style:"width:"+100*t.code/5+"%;"},t._l(5,function(t){return e("div",{key:t})}),0)])},n=[],i={name:"yellow_star",props:["code"],data:function(){return{}},components:{},mounted:function(){},computed:{},methods:{}},a=i,r=(e("4d7c"),e("2877")),c=Object(r["a"])(a,s,n,!1,null,"026294ba",null);o["a"]=c.exports},"2f21":function(t,o,e){"use strict";var s=e("79e5");t.exports=function(t,o){return!!t&&s(function(){o?t.call(null,function(){},1):t.call(null)})}},"374d":function(t,o,e){"use strict";var s=e("7a05"),n=e.n(s);n.a},"3b2b":function(t,o,e){var s=e("7726"),n=e("5dbc"),i=e("86cc").f,a=e("9093").f,r=e("aae3"),c=e("0bfb"),l=s.RegExp,d=l,h=l.prototype,u=/a/g,p=/a/g,f=new l(u)!==u;if(e("9e1e")&&(!f||e("79e5")(function(){return p[e("2b4c")("match")]=!1,l(u)!=u||l(p)==p||"/a/i"!=l(u,"i")}))){l=function(t,o){var e=this instanceof l,s=r(t),i=void 0===o;return!e&&s&&t.constructor===l&&i?t:n(f?new d(s&&!i?t.source:t,o):d((s=t instanceof l)?t.source:t,s&&i?c.call(t):o),e?this:h,l)};for(var v=function(t){t in l||i(l,t,{configurable:!0,get:function(){return d[t]},set:function(o){d[t]=o}})},_=a(d),m=0;_.length>m;)v(_[m++]);h.constructor=l,l.prototype=h,e("2aba")(s,"RegExp",l)}e("7a56")("RegExp")},"462a":function(t,o,e){"use strict";e("c5f6");var s={props:{heights:{type:Array,required:!0},remain:{type:Number,default:10},enabled:{type:Boolean,default:!0}},delta:{start:0,end:0,total:0,keeps:0,paddingTop:0,paddingBottom:0,reserve:6},methods:{handleScroll:function(t){var o=this.$el.scrollTop;this.$emit("scrolling",t),this.enabled?this.updateZone(o):this.updateZoneNormally(o)},updateZoneNormally:function(t){var o=this.$el.scrollHeight,e=this.$el.clientHeight;0===t?this.$emit("toTop"):t+e+5>=o&&this.$emit("toBottom")},findOvers:function(t){for(var o=this.$options.delta,e=0,s=this.heights.length,n=this.heights[0],i=Math.floor(o.reserve/2);e<s;e++){if(!(t>=n))break;n+=this.heights[e+1]}return e>i-1?e-i:0},updateZone:function(t){var o=this.$options.delta,e=this.findOvers(t);!t&&o.total&&this.$emit("toTop");var s=e||0,n=s+o.keeps,i=this.heights.reduce(function(t,o){return t+o});t&&t+this.$el.clientHeight>=i&&(s=o.total-o.keeps,n=o.total-1,this.$emit("toBottom")),o.start=s,o.end=n,this.$forceUpdate()},filter:function(t){var o=this.$options.delta;t||(t=[],o.start=0);var e=t.filter(function(t,e){return e>=o.start&&e<=o.end}),s=this.heights.slice(0,o.start),n=this.heights.slice(o.end+1);return o.total=t.length,o.paddingTop=s.length?s.reduce(function(t,o){return t+o}):0,o.paddingBottom=n.length?n.reduce(function(t,o){return t+o}):0,e}},beforeMount:function(){if(this.enabled){var t=this.remain,o=this.$options.delta;o.start=0,o.end=t+o.reserve-1,o.keeps=t+o.reserve}},render:function(t){var o=this.enabled?this.filter(this.$slots.default):this.$slots.default,e=this.$options.delta,s=parseFloat(getComputedStyle(document.getElementsByTagName("html")[0],null).fontSize),n=window.innerHeight-2.5*s+1;return t("div",{class:{"scroll-container":1},style:{display:"block","overflow-y":"auto",height:"100%",position:"relative"},on:{"&scroll":this.handleScroll}},[t("div",{style:{"min-height":"".concat(n,"px"),display:"block","padding-top":e.paddingTop+"px","padding-bottom":e.paddingBottom+"px"}},o)])}};o["a"]=s},"4d7c":function(t,o,e){"use strict";var s=e("0c07"),n=e.n(s);n.a},"520b":function(t,o,e){},"55dd":function(t,o,e){"use strict";var s=e("5ca1"),n=e("d8e8"),i=e("4bf8"),a=e("79e5"),r=[].sort,c=[1,2,3];s(s.P+s.F*(a(function(){c.sort(void 0)})||!a(function(){c.sort(null)})||!e("2f21")(r)),"Array",{sort:function(t){return void 0===t?r.call(i(this)):r.call(i(this),n(t))}})},6396:function(t,o,e){"use strict";e("a481"),e("28a5"),e("3b2b");function s(t,o){"string"!==typeof t&&"number"!==typeof t||"undefined"!==typeof o?t===document?(console.log("target:document"),document.body.scrollTop=o||0,document.documentElement.scrollTop=o||0):t.scrollTop=o||0:(o=t,t=document,document.documentElement.scrollTop=o,document.body.scrollTop=o)}function n(t){return t!==document&&t?t.scrollTop:document.documentElement.scrollTop||document.body.scrollTop}var i=null,a=function(t,o,e,s){return e*(t/=s)*t*t+o};o["a"]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,r=arguments.length>3?arguments[3]:void 0,c=n(t),l=Math.ceil(e/16),d=0,h=o-c;i&&clearInterval(i),i=setInterval(function(){d++,d>=l&&(i&&clearInterval(i),"function"===typeof r&&r()),s(t,a(d,c,h,l))},1e3/60)}},7562:function(t,o,e){"use strict";var s=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"control-wrapper",on:{click:t.scrollTo}},[e("img",{attrs:{src:"http://hhh.images.visitshanghai.com.cn/gotop.png",alt:""}})])},n=[],i={name:"Control",methods:{scrollTo:function(){this.$emit("scroll-to")}}},a=i,r=(e("be27"),e("2877")),c=Object(r["a"])(a,s,n,!1,null,"1d530328",null);o["a"]=c.exports},"7a05":function(t,o,e){},"86c3":function(t,o,e){"use strict";var s=e("fb4e"),n=e.n(s);n.a},be27:function(t,o,e){"use strict";var s=e("520b"),n=e.n(s);n.a},db2f:function(t,o,e){},ddde:function(t,o,e){t.exports=e.p+"img/no_order.6317e10a.png"},eaa8:function(t,o,e){"use strict";e.r(o);var s={};e.r(s),e.d(s,"dropDownStart",function(){return d}),e.d(s,"dropDownMove",function(){return h}),e.d(s,"dropUpStart",function(){return u});var n=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{ref:"foodWrapper",staticClass:"food"},[s("search",{on:{updateFoodList:t.updateFoodList}}),s("div",{directives:[{name:"stopScrollSelf",rawName:"v-stopScrollSelf"}],staticClass:"food-list"},[s("scroll-list",{directives:[{name:"stopScroll",rawName:"v-stopScroll"},{name:"dropDown",rawName:"v-dropDown",value:{option:t.dropDownOption,dropStart:t.dropDownStart,dropMove:t.dropDownMove,dropUpStart:t.dropUpStart},expression:"{\n\t\t\t'option': dropDownOption,\n\t\t\t'dropStart': dropDownStart,\n\t\t\t'dropMove': dropDownMove,\n\t\t\t'dropUpStart': dropUpStart\n\t\t\t}"}],ref:"scrollWrapper",class:["list-container","scrollbar",t.showBar?"padT1":""],attrs:{heights:t.scrollHeights,remain:t.remain,enabled:!1},on:{toBottom:t.onBottom,scrolling:function(o){return t.onScroll(o)}}},[s("div",{staticClass:"wrap-box"},t._l(t.list,function(o,e){return s("section",{key:e,staticClass:"one_business clearfix",on:{click:function(e){return t.goDetail(o)}}},[s("div",{staticClass:"business_img",style:{"background-image":"url("+o.photoUrl+")"}}),s("div",{staticClass:"business_info"},[s("section",{staticClass:"business_name"},[s("h3",{staticClass:"ell"},[t._v(t._s(o.name)+t._s(o.branchName?"("+o.branchName+")":""))])]),s("section",{staticClass:"business_code"},[s("YellowStar",{attrs:{code:o.avgRating}}),s("span",{staticClass:"v-md1"},[t._v(t._s(null==o.ugcCount?0:o.ugcCount)+"条")]),s("span",{staticClass:"v-md1"},[t._v("￥"+t._s(null==o.avgPrice?"--":o.avgPrice)+"/人")])],1),s("section",{staticClass:"business_other clearfix"},[s("div",{staticClass:"other_price fl"},[t._v(t._s(o.address||"暂无地址"))]),s("div",{staticClass:"other_dis fr"},[t._v(t._s(t.formatAddr(o.distance)))])])])])}),0),t.list.length>0&&!t.isLoading&&!t.hasMore?s("div",{staticClass:"loading-state"},[t._v("\n\t\t\t\t已经到底了\n\t\t\t")]):t._e(),t.list.length>0&&t.isLoading&&t.hasMore?s("div",{staticClass:"loading-state"},[t._v("\n\t\t\t\t正在加载数据，请稍后...\n\t\t\t")]):t._e(),!t.isLoading&&t.loadError?s("div",{staticClass:"loading-state"},[t._v("\n\t\t\t\t加载失败，请重试\n\t\t\t")]):t._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:0==t.list.length&&!t.isLoading&&!t.loadError,expression:"list.length==0 && !isLoading && !loadError"}],staticClass:"empty"},[s("img",{attrs:{src:e("ddde")}}),s("div",{staticClass:"tips"},[t._v("暂无数据")])])]),s("transition",{attrs:{name:"fade"}},[s("control",{directives:[{name:"show",rawName:"v-show",value:t.controlShow,expression:"controlShow"}],on:{"scroll-to":t.scrollTo}})],1)],1)],1)},i=[],a=(e("ac6a"),e("5df3"),e("cebc")),r=(e("55dd"),e("462a")),c=e("7562"),l=e("2486");function d(){this.dropDownInfo=""}function h(t,o){this.showBar&&o<.7&&this.$store.commit("SET_HEADER_BAR",!1),this.dropDownInfo=o>=.7?"松开刷新":"下拉刷新"}function u(){var t=this;"松开刷新"===this.dropDownInfo&&(this.resetList(),this.fetchList(this.$route.query)),setTimeout(function(){t.dropDownInfo=""},100)}var p=e("6396"),f=(e("7f7f"),e("d225")),v=e("b0b4"),_=function(){function t(){var o=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Object(f["a"])(this,t),this._enableMultiple=o,this._beforeHandlers={default:[]},this._handlers={},this._afterHandlers={default:[]}}return Object(v["a"])(t,[{key:"getHandlers",value:function(t){return this._handlers[t]||[]}},{key:"on",value:function(t,o,e){e=void 0===e?this._enableMultiple:e,e?(this._handlers[t]||(this._handlers[t]=[]),this._handlers[t].push(o)):(console.warn("[common event]: event '".concat(t,"' has been used!")),this._handlers[t]=[o])}},{key:"onBefore",value:function(t,o){t=t||"default",this._beforeHandlers[t]||(this._beforeHandlers[t]=[]),this._beforeHandlers[t].push(o)}},{key:"onAfter",value:function(t,o){t=t||"default",this._afterHandlers[t]||(this._afterHandlers[t]=[]),this._afterHandlers[t].push(o)}},{key:"off",value:function(t){delete this._handlers[t]}},{key:"emit",value:function(t){for(var o=this,e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];var i=this._handlers[t]||[],a={stop:!1},r=i.length;s=s.concat([{name:t,length:r,exit:function(){a.stop=!0}}]),r&&(this._beforeHandlers[t]?i=this._beforeHandlers[t].concat(i):this._beforeHandlers.default&&(i=this._beforeHandlers.default.concat(i)),this._afterHandlers[t]?i=i.concat(this._afterHandlers[t]):this._afterHandlers.default&&(i=i.concat(this._afterHandlers.default)),i.forEach(function(t){!a.stop&&t.apply(o,s)}))}}]),t}(),m=new _(!0),g={getInstance:function(){return m}},w=e("ac2d"),y=e("2cab"),b=e("2f62"),S=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"search"},[e("nav-header",{attrs:{curFood:t.curFood,curSort:t.sortType[t.curSort],showBar:t.showBar,showFoodType:t.showFoodType,showSortType:t.showSortType},on:{"nav-click":t.navClick}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showFoodType,expression:"showFoodType"}],staticClass:"mask",on:{click:t.closeMask}},[e("div",{staticClass:"panel"},[e("ul",t._l(t.foodType,function(o,s){return e("li",{key:s,class:{active:o==t.curFood},on:{click:function(e){return t.choose(o,"name")}}},[t._v("\n\t\t\t\t\t"+t._s("美食"==o?"全部"+o:o)+"\n\t\t\t\t")])}),0)])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showSortType,expression:"showSortType"}],staticClass:"mask",on:{click:t.closeMask}},[e("div",{staticClass:"panel"},[e("ul",[e("li",{staticClass:"sort"},[t._v("排序方式")]),t._l(t.sortType,function(o,s){return e("li",{key:s,class:{active:s==t.curSort},on:{click:function(o){return t.choose(s,"sort")}}},[t._v("\n\t\t\t\t\t"+t._s(o)+"\n\t\t\t\t")])})],2)])])],1)},T=[],k=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("header",{staticClass:"container-wrap"},[e("div",{staticClass:"header_bg",class:{showBar:t.showBar},style:{backgroundImage:"url("+t.header.imgUrl+")"}},[e("div",{staticClass:"header_back",on:{click:t.goBack}}),e("div",{staticClass:"position-text"},[e("p",{staticClass:"title"},[t._v(t._s(t.header.title))]),e("p",{staticClass:"describe"},[t._v(t._s(t.header.describe))])])]),e("div",{staticClass:"header_bar",style:!t.showBar&&"height:0;overflow:hidden;",on:{click:t.goBack}},[e("div",{staticClass:"header_bar_back"}),e("div",{staticClass:"header_bar_title"},[t._v(t._s(t.header.title))])]),e("div",{staticClass:"header-nav"},[e("div",{staticClass:"selection-panel"},[e("div",{staticClass:"result-panel"},[e("div",{staticClass:"food-type",class:{active:t.showFoodType},on:{click:function(o){return t.selectSearch("name")}}},[t._v("\n\t\t\t\t\t"+t._s("美食"==t.curFood?"全部"+t.curFood:t.curFood)+"\n\t\t\t\t\t"),e("span",{staticClass:"drop-rectangle"})]),e("div",{staticClass:"sort-type",class:{active:t.showSortType},on:{click:function(o){return t.selectSearch("sort")}}},[t._v(t._s(t.curSort)+"\n\t\t\t\t\t"),e("span",{staticClass:"drop-rectangle"})])])])])])},E=[],C=e("55e6"),D={name:"index",data:function(){return{isIOS:!0}},props:{header:{type:Object,default:function(){return{title:"精选美食",describe:"融汇中西 食在上海",imgUrl:e("28ce")}}},curSort:{type:String},curFood:{type:String},showFoodType:{type:Boolean},showSortType:{type:Boolean}},mounted:function(){this.dealIosStatusbarHeight()},computed:Object(a["a"])({},Object(b["c"])({showBar:function(t){return t.showBar}})),methods:{selectSearch:function(t){this.$store.commit("SET_HEADER_BAR",!0),this.$emit("nav-click",{type:t})},goBack:function(){w["a"].closeWebView()},dealIosStatusbarHeight:function(){C["a"].isIOS&&(this.isIOS=!0)}}},L=D,F=(e("f038"),e("2877")),O=Object(F["a"])(L,k,E,!1,null,"59cc6dc4",null),M=O.exports,$=["美食","本帮江浙菜","特色点心","美味川湘","经典粤菜"],B={1:"距离优先",2:"人气优先"},x=g.getInstance(),H={name:"search",data:function(){return{foodType:$,sortType:B,showFoodType:!1,showSortType:!1,curFood:$[0],curSort:"1"}},components:{NavHeader:M},computed:Object(a["a"])({},Object(b["c"])({showBar:function(t){return t.showBar}})),mounted:function(){this.curFood=$[this.$route.params.id-25]||$[0],this.curSort=this.$route.params.sort},watch:{showFoodType:function(t){var o=document.querySelector(".list-container");o&&(o.style.overflowY=t?"hidden":"auto")},showSortType:function(t){var o=document.querySelector(".list-container");o&&(o.style.overflowY=t?"hidden":"auto")}},methods:{navClick:function(t){"name"===t.type?this.showFoodType=!this.showFoodType:this.showSortType=!this.showSortType,"name"===t.type?this.showSortType=!1:this.showFoodType=!1,x.emit("scroll_list",4)},choose:function(t,o){var e=!0;"name"===o?(this.curFood===t&&(e=!1),this.curFood=t,this.showFoodType=!1):(this.curSort===t&&(e=!1),this.curSort=t,this.showSortType=!1),this.$store.commit("SET_HEADER_BAR",!1),e&&this.$emit("updateFoodList",{curFood:this.curFood,curSort:this.curSort})},closeMask:function(){this.showFoodType=!1,this.showSortType=!1}}},Y=H,j=(e("374d"),Object(F["a"])(Y,S,T,!1,null,"622d06c0",null)),N=j.exports,I=e("da80"),A=e("8742"),R={getFoodList:function(t,o){return Object(I["a"])(Object(a["a"])({method:"POST",url:A["a"].food.getFoodList,data:t},o))}},U=e("90fe"),z=R.getFoodList,P=g.getInstance(),q=["美食","本帮江浙菜","特色点心","美味川湘","经典粤菜"],W={data:function(){return{scrollHeights:[],remain:10,dropDownOption:{container:"div",dropType:"fixed",dropMax:200},dropDownInfo:"",controlShow:!1,list:[],isLoading:!0,loadError:!1,hasMore:!0,start:1,location:{lat:10,lon:10},isOpenLocation:!1,formatAddr:U["a"],curFood:q[0],curSort:"1"}},components:{YellowStar:y["a"],Search:N,ScrollList:r["a"],Control:c["a"]},directives:{dropDown:l["a"]},mounted:function(){var t=this;P.on("scroll_list",function(t){},!1),this.curFood=q[this.$route.params.id-25]||q[0],this.curSort=this.$route.params.sort,this.getLocation(function(){console.log(t.location.lat),console.log(t.location.lon),t.fetchList()})},computed:Object(a["a"])({},Object(b["c"])({showBar:function(t){return t.showBar}})),methods:Object(a["a"])({},s,{onBottom:function(){!this.isLoading&&this.hasMore&&this.fetchList()},resetList:function(){this.list=[],this.start=1},updateFoodList:function(t){this.curFood=t.curFood,this.curSort=t.curSort,this.resetList(),this.fetchList()},getLocation:function(t){var o=this;w["a"].gainLocation(function(e){100===e.msgCode&&e.result&&(o.location.lat=e.result.gdLatitude,o.location.lon=e.result.gdLongitude,t&&t())},this)},goDetail:function(t){w["a"].openNewWebView({url:t.businessUrl,isFitWindow:!0})},fetchList:function(){var t=this,o={page:this.start,type:this.curSort,size:25,categoryName:"经典粤菜"===this.curFood?"粤菜":this.curFood,lat:this.location.lat,lon:this.location.lon,direction:"1"===this.curSort?"asc":"desc"};if(console.log(o),this.isLoading=!0,"美味川湘"===this.curFood){var e={page:this.start,size:13,type:this.curSort,categoryName:"川菜",lat:this.location.lat,lon:this.location.lon,direction:"1"===this.curSort?"asc":"desc"},s={page:this.start,size:12,type:this.curSort,categoryName:"湘菜",lat:this.location.lat,lon:this.location.lon,direction:"1"===this.curSort?"asc":"desc"};Promise.all([z(e),z(s)]).then(function(o){o[0].data&&o[1].data?(t.isLoading=!1,t.loadError=!1,t.list=t.list.concat(o[0].data.item).concat(o[1].data.item),t.hasMore=o[0].data.isMore&&o[1].data.isMore,console.log(t.hasMore),t.start++,console.log(t.list)):(t.$toast({content:"未找到您要的页面，请稍后重试："+o[0].code,duration:2500}),t.isLoading=!1,t.loadError=!0)}).catch(function(o){t.$toast({content:o.data.code,duration:2500}),t.isLoading=!1,t.loadError=!0})}else z(o,{hideLoading:!1}).then(function(o){console.log(o),o.data?(t.isLoading=!1,t.loadError=!1,t.list=t.list.concat(o.data.item),t.hasMore=o.data.isMore,t.start++,console.log(t.list)):(t.$toast({content:"未找到您要的页面，请稍后重试："+o.code,duration:2500}),t.isLoading=!1,t.loadError=!0)}).catch(function(o){t.$toast({content:o.data.code,duration:2500}),t.isLoading=!1,t.loadError=!0})},scrollTo:function(){Object(p["a"])(this.$refs.scrollWrapper.$el,0,300)},onScroll:function(t){if(this.controlShow=t.target.scrollTop>100,t.target.scrollHeight>t.target.clientHeight){var o=t.target.scrollTop;o<0&&(o=0),this.$store.commit("SET_HEADER_BAR",o)}}})},Z=W,V=(e("86c3"),Object(F["a"])(Z,n,i,!1,null,"200b2b32",null));o["default"]=V.exports},f038:function(t,o,e){"use strict";var s=e("db2f"),n=e.n(s);n.a},fb4e:function(t,o,e){}}]);